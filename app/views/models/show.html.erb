<h1>Model: <%= @model.model_code %></h1>

<div class="card mb-3">
  <div class="card-header">
    Model Details
  </div>
  <div class="card-body">
    <h5 class="card-title"><%= @model.model_code %></h5>
    <p class="card-text"><strong>Description:</strong> <%= @model.description %></p>
    <p class="card-text"><strong>Type:</strong> <%= link_to @model.type.type_name, @model.type %></p>
  </div>
</div>

<h2>Add Existing Block</h2>
<div class="custom-select mb-3">
  <input type="text" id="custom-select-input" class="form-control" placeholder="Search blocks">
  <ul id="custom-select-list" class="list-group">
    <% Block.where.not(id: @model.blocks.pluck(:id)).each do |block| %>
      <li class="list-group-item" data-value="<%= block.id %>"><%= "#{block.block_number} - #{block.block_name}" %></li>
    <% end %>
  </ul>
</div>

<%= form_with(url: add_block_model_path(@model), method: :post, local: true, class: 'mb-3') do |form| %>
  <%= form.hidden_field :block_id, id: 'selected-block-id' %>
  <%= form.submit "Add Block", class: 'btn btn-primary', id: 'add-block-btn', disabled: true %>
<% end %>

<h2>Related Blocks</h2>
<ul class="list-group mb-3">
  <% @model.blocks.each do |block| %>
    <li class="list-group-item d-flex justify-content-between align-items-center">
      <%= link_to block.block_name, block %>
      <small class="text-muted">Block Number: <%= block.block_number %></small>
      <%= button_to 'Remove', remove_block_model_path(@model, block_id: block.id), method: :delete, class: "btn btn-sm btn-danger", data: { confirm: 'Are you sure?' } %>
    </li>
  <% end %>
</ul>

<div class="mt-3">
  <%= link_to 'Edit', edit_model_path(@model), class: "btn btn-warning" %>
  <%= link_to 'Back to Models', models_path, class: "btn btn-secondary" %>
  <%= button_to 'Destroy', @model, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger" %>
</div>
